{"version":3,"sources":["scripts.js","share.js"],"names":["PageTimer","self","this","getLoadTime","now","Date","getTime","window","performance","mozPerformance","msPerformance","webkitPerformance","timing","ms","navigationStart","Math","round","logToConsole","$","on","console","info","append","holder","text","StickyFooter","$wrap","$footer","$window","updateWrapperCSS","footerHeight","outerHeight","css","marginBottom","paddingBottom","bindOnResize","update","ExternalLinkHandler","hostname","document","location","matchInternalLink","RegExp","addTargetAttribute","context","find","filter","each","anchor","href","attr","isInternalLink","i","length","regex","match","addClass","UIBindings","bindTooltips","tooltip","bindPopovers","popover","bindSlickCarousels","slick","dots","slidesToShow","slidesToScroll","arrows","fade","autoplay","adaptiveHeight","autoplaySpeed","infinite","speed","variableWidth","e","preventDefault","index","data","bindSharing","shareHandler","ShareHandler","appendFacebook","appendTwitter","bindMagnificpopup","magnificPopup","type","callbacks","markupParse","template","values","item","description","el","gallery","enabled","image","headerFit","captionFit","preserveHeaderAndCaptionWidth","markup","bindMasonary","load","masonry","itemSelector","columnWidth","gutter","bindSubmittingButtons","submitText","submittingText","btn","closest","removeClass","hide","prop","ScrollTop","scrollButton","container","containerTop","offset","top","hideOnScroll","scrollTop","click","stop","animate","init","Notifications","wrapper","div","wrapperTop","bindOnScroll","height","bindCloseButton","notification","fadeOut","Vertilize","options","byRow","property","target","remove","setHeightFor","matchHeight","selector","$columns","maxHeight","max","apply","map","get","isNumber","evt","event","charCode","which","keyCode","setGuest","change","log","val","html","setPricing","rate","$perPerson","perPerson","replace","$pricingPersons","persons","parseFloat","pricingLocalFee","pricingCommission","totalPricing","toFixed","SelectColor","HomeBanners","HeaderNav","navContainer","children","authenticated","show","display","visibility","url","undefined","parent","SetCurrency","flag","cookie","_","isUndefined","SelectCurrency","currencyRates","rates","ConvertCurrency","dropDown","hasClass","CalcDateWidth","dateWidth","width","dateHeight","isEmpty","currencies","GBP","USD","EUR","ZAR","currency","currencyRate","pricing","convertedPricing","currencyPricing","expires","path","currentCurrency","DatePicker","toDate","fromDate","overflow","onclick","id","daysActive","daysInActive","today","sDate","datepicker","daysOfWeekDisabled","daysOfWeekHighlighted","startDate","templates","leftArrow","rightArrow","monthYear","day","experienceId","date","experience_id","post","done","setTimeout","dir","guests","parseInt","siblings","experienceGuests","dataId","bookNow","dataHref","modal","BookNow","toValue","format","language","d","setDate","getDate","timestamp","timeStamp","UIModal","TogglePassword","toggleClass","passwordInput","AffixButton","Newsletter","newsletterUrl","newsletterGroup","newsletterGroupLabel","newsletterGroupAlert","keypress","ajax","email","dataType","success","response","error","JSON","stringify","json","parseJSON","responseJSON","FileUpload","imageBin","imageType","removeBin","resize","fileupload","fail","result","files","file","imageSet","name","inputName","progressall","progress","loaded","total","support","fileInput","$container","definedProps","buildHttpQuery","copy","k","v","param","openPopup","shareWindow","conf","screen","left","focus","resizeTo","moveTo","popups","google-plus","opt","hl","lang","facebook","u","t","twitter","via","linkedin","isFramed","pinterest","media","createButton","platform","button","cursor","share","sharePage","$page","shareProps","extend","startLen","diff","substr","popupConf","open","shareLoader","spinner","position","async","alert","appendGoogle","appendLinkedIn","appendPinterest","App"],"mappings":"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","file":"scripts.js","sourcesContent":["/*jslint browser: true, nomen: true */\n/*global $ */\n'use strict';\n\nfunction PageTimer() {\n    var self = this;\n    this.getLoadTime = function () {\n        var now = new Date().getTime();\n        // Get the performance object\n        window.performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance || {};\n        var timing = performance.timing || {};\n\n        var ms = now - timing.navigationStart;\n\n        return Math.round(ms / 10) / 100;\n    };\n\n    this.logToConsole = function () {\n        $(window).on('load', function () {\n            console && console.info && console.info(\"Client loaded in \" + self.getLoadTime() + 's');\n        });\n    };\n\n    this.append = function (holder) {\n        $(window).on('load', function () {\n            holder.text(' | LT: ' + self.getLoadTime() + 's');\n        });\n    }\n}\n\n\nfunction StickyFooter($wrap, $footer) {\n    var $window = $(window);\n    this.updateWrapperCSS = function () {\n        var footerHeight = $footer.outerHeight();\n\n        $wrap.css({\n            marginBottom: -1 * footerHeight,\n            paddingBottom: footerHeight\n        });\n    };\n\n    this.bindOnResize = function () {\n        $window.on('resize', this.updateWrapperCSS);\n\n        return this;\n    };\n\n    this.update = function () {\n        this.updateWrapperCSS();\n\n        return this;\n    };\n}\n\n\n/*\n Ensure all external links load as new window/tabs:\n */\n\nvar App;\n\nfunction ExternalLinkHandler() {\n    var self = this;\n    var hostname = document.location.hostname;\n\n    this.matchInternalLink = [new RegExp(\"^https?:\\/\\/(.*?)\" + hostname)];\n\n    this.addTargetAttribute = function (context) {\n        context.find('a').filter('[href^=\"http://\"], [href^=\"https://\"]').each(function () {\n            var anchor = $(this);\n            var href = anchor.attr('href');\n            var isInternalLink = false;\n\n            for (var i = 0; i < self.matchInternalLink.length; i++) {\n                var regex = self.matchInternalLink[i];\n                if (href.match(regex)) {\n                    isInternalLink = true;\n                }\n            }\n\n            if (!isInternalLink) {\n                anchor.attr('target', '_blank').addClass('external-link');\n            }\n        });\n    };\n\n}\n\nfunction UIBindings() {\n    this.bindTooltips = function () {\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    };\n    this.bindPopovers = function () {\n        $('[data-toggle=\"popover\"]').popover();\n    };\n\n    this.bindSlickCarousels = function () {\n        $('[data-slick-carousel-default]').slick({\n            dots: true,\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            arrows: true,\n            fade: true,\n            autoplay: true,\n            adaptiveHeight: true,\n            autoplaySpeed: 3000\n        });\n\n        $('[data-slick-carousel-auto-width]').slick({\n            infinite: true,\n            speed: 300,\n            slidesToShow: 3,\n            variableWidth: true\n        });\n\n        $('[data-slick-carousel-three]').slick({\n            dots: true,\n            infinite: true,\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            adaptiveHeight: true,\n            autoplay: true,\n            autoplaySpeed: 3000\n        });\n\n        $('[data-toggle=\"slick-nav\"]').on('click', function (e) {\n            e.preventDefault();\n            var index = $(this).data('index');\n            $('[data-slick-carousel-default]').slick('slickGoTo', index);\n        });\n    };\n\n    this.bindSharing = function () {\n        $(\"[data-share-default]\").each(function () {\n            var shareHandler = new ShareHandler($(this));\n            shareHandler.appendFacebook();\n            shareHandler.appendTwitter();\n            //shareHandler.appendGoogle();\n            //shareHandler.appendLinkedIn();\n            //shareHandler.appendPinterest();\n        });\n    };\n\n    this.bindMagnificpopup = function () {\n        $('.gallery-image').magnificPopup({\n            type: 'image',\n            callbacks: {\n                markupParse: function (template, values, item) {\n                    values.description = item.el.data('description');\n                }\n            },\n            gallery: {\n                enabled: true\n            },\n            image: {\n                headerFit: true,\n                captionFit: true,\n                preserveHeaderAndCaptionWidth: false,\n                markup: '<div class=\"mfp-figure\">' +\n                '<figure>' +\n                '<header class=\"mfp-header\">' +\n                '<div class=\"mfp-top-bar\">' +\n                '<div class=\"mfp-title\"></div>' +\n                '<div class=\"mfp-close\"></div>' +\n                '<div class=\"mfp-decoration\"></div>' +\n                '</div>' +\n                '</header>' +\n                '<section class=\"mfp-content-container\">' +\n                '<div class=\"mfp-img\"></div>' +\n                '</section>' +\n                '<footer class=\"mfp-footer\">' +\n                '<figcaption class=\"mfp-figcaption\">' +\n                '<div class=\"mfp-bottom-bar-container\">' +\n                '<div class=\"mfp-bottom-bar\">' +\n                '<div class=\"mfp-counter\"></div>' +\n                '<div class=\"mfp-description\"></div>' +\n                '<div class=\"mfp-decoration\"></div>' +\n                '</div>' +\n                '</div>' +\n                '</figcaption>' +\n                '</footer>' +\n                '</figure>' +\n                '</div>',\n            }\n        });\n    };\n\n    this.bindMasonary = function () {\n        $('img').load(function () {\n            $(\".grid\").masonry();\n        });\n        $('.grid').masonry({\n            itemSelector: '.grid-item',\n            columnWidth: '.grid-sizer',\n            gutter: 5\n        });\n    };\n\n    this.bindSubmittingButtons = function () {\n        $(document).on('submit', function () {\n            var submitText = $(this).find('[data-submit-text]');\n            var submittingText = $(this).find('[data-submitting-text]');\n            var btn = submitText.closest('button');\n            submittingText.removeClass('hide');\n            submitText.hide();\n            btn.prop('disabled', true);\n        });\n    };\n\n\n}\n\n\nvar $window = $(window);\n\nfunction ScrollTop() {\n    var scrollButton = $('.scroll-to-top');\n    var container = $('#container');\n    var containerTop = container.offset().top;\n\n    this.hideOnScroll = function () {\n        $(window).on('scroll', function () {\n            var scrollTop = $(window).scrollTop();\n            if (scrollTop > containerTop) {\n                scrollButton.addClass('visible');\n            } else {\n                scrollButton.removeClass('visible');\n            }\n        });\n\n        scrollButton.click(function () {\n            $('html, body').stop().animate({\n                scrollTop: 0\n            }, 1250, 'easeInOutExpo');\n        });\n    };\n\n    this.init = function () {\n        this.hideOnScroll();\n    };\n}\n\n\nfunction Notifications() {\n    var wrapper = $('#notifications-wrapper');\n    var div = $('#notifications');\n    var wrapperTop = wrapper.offset().top;\n\n    this.bindOnScroll = function () {\n        wrapper.height(wrapper.height());\n        $(window).on('scroll', function () {\n            var scrollTop = $(window).scrollTop();\n            if (scrollTop > wrapperTop) {\n                div.addClass('fixed');\n            } else {\n                div.removeClass('fixed');\n            }\n        });\n    };\n\n    this.bindCloseButton = function () {\n        $(document).on('click', '[data-toggle=\"remove\"]', function (e) {\n            e.preventDefault();\n            var notification = $(this).closest('.notification');\n            notification.fadeOut(250, function () {\n                wrapper.height('auto');\n                wrapper.height(wrapper.height());\n\n            });\n        });\n    };\n\n    this.init = function () {\n        this.bindOnScroll();\n        this.bindCloseButton();\n    };\n}\n\nfunction Vertilize() {\n\n    this.init = function () {\n        var options = {\n            byRow: true,\n            property: 'height',\n            target: null,\n            remove: false\n        };\n\n        setHeightFor('.media-heading.same-height');\n        setHeightFor('.media-media-summary.same-height');\n        setHeightFor('.media .media-heading');\n        setHeightFor('.media .media-summary');\n        setHeightFor('.contact-block .same-height');\n\n        $('.same-height').matchHeight(options);\n    };\n}\n\nfunction setHeightFor(selector) {\n    var $columns = $(selector);\n    var maxHeight = Math.max.apply(Math, $columns.map(function () {\n        return $(this).height();\n    }).get());\n\n    $columns.height(maxHeight);\n}\n\nfunction isNumber(evt) {\n    evt = (evt) ? evt : window.event;\n    var charCode = (evt.which) ? evt.which : evt.keyCode;\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\n        return false;\n    }\n    return true;\n}\n\nfunction setGuest() {\n    this.init = function () {\n        $(\"select#guests\").change(function () {\n            console.log(\"setting new guests: \" + $(this).val());\n            $(\"#pricing_persons\").attr(\"data-pricing-persons\", $(this).val());\n            $(\"#pricing_persons\").html($(this).val() + \" person(s)\");\n\n            (new setPricing).init();\n        });\n    };\n}\n\nfunction setPricing() {\n    var rate = 0.2;\n    this.init = function () {\n\n        var $perPerson = $(\"#per_person\");\n        var perPerson = $perPerson.val().replace(\"R\", \"\");\n        var $pricingPersons = $(\"#pricing_persons\");\n        var persons = $pricingPersons.attr(\"data-pricing-persons\");\n\n        console.log(\"persons\", persons);\n        console.log(\"$perPerson.length\", $perPerson.length);\n\n        if (parseFloat(persons) > 0 && perPerson.length > 0) {\n            var pricingLocalFee = parseFloat(perPerson) * parseFloat(persons);\n            var pricingCommission = pricingLocalFee * rate;\n            var totalPricing = pricingLocalFee + pricingCommission;\n\n            $('#pricing_total').html(\"R\" + totalPricing.toFixed(2));\n            $('#pricing_commission').html(\"R\" + pricingCommission.toFixed(2));\n            $('#pricing_local_fee').html(\"R\" + pricingLocalFee.toFixed(2));\n            $perPerson.val('R' + perPerson);\n        }\n    };\n}\n\nfunction SelectColor() {\n    this.init = function () {\n\n        // $(\"select\").each(function () {\n        //     if ($(this).val() != \"\") {\n        //         $(this).css({color: \"#FFFFFF\"});\n        //     }\n        //     else {\n        //         $(this).css({color: \"#aeaeae\"});\n        //     }\n        // });\n        //\n        // $(\"select\").change(function () {\n        //     if ($(this).val() != \"\") {\n        //         $(this).css({color: \"#FFFFFF\"});\n        //     }\n        //     else {\n        //         $(this).css({color: \"#aeaeae\"});\n        //     }\n        // });\n    };\n}\n\nfunction HomeBanners() {\n\n    this.init = function () {\n\n        // var searchBlock = $(\"#search-block\");\n        // var indexSlider = $(\".index-slider\");\n        //\n        // if (searchBlock.length > 0) {\n        //\n        //     if (indexSlider.width() > 300) {\n        //\n        //         var sliderHeight = indexSlider.height();\n        //         var searchHeight = searchBlock.height();\n        //         var heightDiff = parseFloat(sliderHeight) / 2 + parseFloat(searchHeight) / 2;\n        //\n        //         console.log(\"slider height: \" + sliderHeight);\n        //         console.log(\"search height: \" + searchHeight);\n        //         console.log(\"diff height: \" + heightDiff);\n        //         searchBlock.css({\n        //             \"top\": \"-\" + (heightDiff + 20) + \"px\",\n        //             \"visibility\": \"visible\"\n        //         });\n        //\n        //         if (parseFloat(indexSlider.attr(\"data-height\")) != sliderHeight) {\n        //\n        //         }\n        //         indexSlider.attr(\"data-height\", sliderHeight);\n        //         setTimeout(function () {\n        //             (new HomeBanners).init();\n        //         }, 3000);\n        //     }\n        // }\n    }\n}\n\nfunction HeaderNav() {\n    var navContainer = $('.top-yellow-bg .container');\n\n    this.init = function () {\n        $.get(\"/local/auth/nav\", function (data) {\n            navContainer.children(\".top-nav\").remove();\n            navContainer.append(data);\n        });\n\n        $.get(\"/local/auth/guest\", function (data) {\n            if (!data.authenticated || data.type === \"local\") {\n                $(\"#become-a-buddy-item\").show();\n            }\n            if (data.authenticated) {\n                $(\".btn-guest-on\").css({display: \"inline-block\"});\n                $(\".btn-guest-off\").hide();\n            }\n            else {\n                $(\".btn-guest-off\").css({display: \"inline-block\"});\n                $(\".btn-guest-on\").hide();\n            }\n            $(\".nav .item\").css({visibility: \"visible\"});\n            $(\".btn-guest\").css({visibility: \"visible\"});\n        }, \"json\");\n\n        var url = $(\"#url\").val();\n        if (url === \"undefined\" || url === undefined) {\n            return false;\n        }\n\n        $(\".navbar-nav li a\").each(function () {\n            $(this).parent().removeClass(\"active\");\n            if ($(this).attr(\"href\") === url) {\n                $(this).parent().addClass(\"active\");\n            }\n        });\n    };\n}\n\nvar currencyRates = {};\nfunction SetCurrency() {\n    this.init = function () {\n\n        var flag = $.cookie('flag');\n\n        if (_.isUndefined(flag)) {\n            flag = \"za\";\n        }\n\n        SelectCurrency(flag);\n\n        $.get(\"/local/booking/forex\", function (data) {\n\n            currencyRates = data.rates;\n            currencyRates[\"ZAR\"] = 1;\n\n            // convert currency\n            ConvertCurrency();\n\n        }, \"json\");\n\n        $(\".dropdown .flag-icon\").click(function () {\n            var flag = $(this).attr(\"data-flag\");\n            SelectCurrency(flag);\n        });\n\n        $(\".selected span\").click(function () {\n            var dropDown = $(\".flag-select .dropdown\");\n\n            if (dropDown.hasClass(\"open\")) {\n                $(\".flag-select .dropdown\").removeClass(\"open\");\n            }\n            else {\n                $(\".flag-select .dropdown\").addClass(\"open\");\n            }\n        });\n    };\n}\n\nfunction CalcDateWidth() {\n    var dateWidth = $(\".datetime-inner\").width();\n\n    var dateHeight = $(\".datepicker-days .table-condensed\").height();\n\n    $(\".datepicker-years .table-condensed\").width((dateWidth / 2) - 3).height(dateHeight);\n    $(\".datepicker-months .table-condensed\").width((dateWidth / 2) - 3).height(dateHeight);\n    $(\".datepicker-decades .table-condensed\").width((dateWidth / 2) - 3).height(dateHeight);\n    $(\".datepicker-centuries .table-condensed\").width((dateWidth / 2) - 3).height(dateHeight);\n}\n\nfunction ConvertCurrency() {\n    if (!_.isEmpty(currencyRates)) {\n\n        var currencies = {\n            GBP: \"&pound;\",\n            USD: \"&dollar;\",\n            EUR: \"&euro;\",\n            ZAR: \"R\"\n        };\n\n        var currency = $(\"#current_currency\").val();\n        var currencyRate = currencyRates[currency];\n\n        $(\".data-currency\").each(function () {\n            var pricing = $(this).attr(\"data-currency-base\");\n\n            var convertedPricing = parseFloat(pricing) * currencyRate;\n            var currencyPricing = currencies[currency];\n\n            $(this).html(currencyPricing + convertedPricing.toFixed(2));\n        });\n    }\n}\n\nfunction SelectCurrency(flag) {\n\n    // save this currency flag\n    $.cookie('flag', flag, {expires: 365, path: '/'});\n\n    $(\".dropdown .flag-icon\").parent().removeClass(\"hide\");\n    $(\".selected span\").attr(\"class\", \"flag-icon flag-icon-\" + flag).css({visibility: \"visible\"});\n    $(\".flag-select .dropdown\").removeClass(\"open\");\n    $(\".dropdown .flag-icon-\" + flag).parent().addClass(\"hide\");\n\n    var currentCurrency = $(\"#current_currency\");\n\n    if (flag === \"gb\") {\n        currentCurrency.val(\"GBP\");\n    }\n    else if (flag === \"us\") {\n        currentCurrency.val(\"USD\");\n    }\n    else if (flag === \"eu\") {\n        currentCurrency.val(\"EUR\");\n    }\n    else {\n        flag = 'za';\n        currentCurrency.val(\"ZAR\");\n    }\n\n    // convert currency\n    ConvertCurrency();\n}\n\nfunction DatePicker() {\n    this.init = function () {\n        var toDate = '';\n        var fromDate = '';\n\n        $(\".datetime-group\").css({visibility: \"hidden\", \"height\": 0, overflow: 'hidden'});\n\n        window.onclick = function (event) {\n            if (event.target.id !== \"duration\") {\n                $(\".datetime-group\").css({visibility: \"hidden\", \"height\": 0});\n            }\n        };\n\n        var daysActive = $(\"#datepicker\").attr(\"data-days-active\");\n        var daysInActive = $(\"#datepicker\").attr(\"data-days-inactive\");\n\n        var today = new Date();\n\n        var sDate = new Date(today.getTime() + 1000 * 60 * 60 * 24 * 3);\n\n        $('#datepicker').datepicker({\n            daysOfWeekDisabled: daysInActive,\n            daysOfWeekHighlighted: daysActive,\n            startDate: sDate,\n            templates: {\n                leftArrow: '&nbsp;',\n                rightArrow: '&nbsp;'\n            }\n        });\n\n        $('#datepicker').datepicker().on(\"changeDate\", function (e) {\n            var monthYear = $(\".datepicker-switch\").html();\n            var day = $(\".table-condensed td.active\").html();\n            var experienceId = $(\"#experience-id\").val();\n            var date = day + \" \" + monthYear;\n\n            $(\".available-times\").attr(\"date\", date);\n            $(\".times-row\").hide();\n\n            var data = {\n                \"date\": date,\n                \"experience_id\": experienceId\n            };\n\n            $.post(\"/local/booking/times\", data)\n                .done(function (html) {\n\n                    $(\".times-row\").html(html).show();\n\n                    setTimeout(function () {\n                        $(\".guest-arrow\").on(\"click\", function () {\n                            var dir = $(this).attr(\"data-dir\");\n                            var guests = parseInt($(this).siblings(\".guest-amount\").html());\n                            var experienceGuests = parseInt($(\"#experience-guests\").val());\n\n                            if (dir < 0) {\n                                if (guests > 1) {\n                                    guests -= 1;\n                                }\n                            } else {\n                                guests += 1;\n                            }\n\n                            console.log(\"experienceGuests\", experienceGuests);\n\n                            if (guests > experienceGuests) {\n                                return false;\n                            }\n                            else {\n                                if (guests === experienceGuests) {\n                                    $(this).parent().children(\".arrow-top\").hide();\n                                }\n                                $(this).siblings(\".arrow-top\").show();\n                            }\n\n                            $(this).siblings(\".guest-amount\").html(guests);\n                            var dataId = $(this).attr(\"data-id\");\n\n                            var bookNow = $(\".schedule-item-\" + dataId + \" .book-now\");\n                            var dataHref = bookNow.attr(\"data-href\");\n\n                            bookNow.attr(\"href\", dataHref + \"/\" + guests);\n                        });\n                    }, 1000);\n                });\n\n            $(\"#schedule-modal\").modal('show');\n\n            (new BookNow).init();\n        });\n\n        var dateRangeWidth = 0;\n        $(\".datetime-input\").click(function () {\n            $(\".datetime-group\").css({visibility: \"visible\", \"height\": 'auto', overflow: 'hidden'});\n\n            CalcDateWidth();\n        });\n\n        $('.date-range').datepicker({\n            templates: {\n                leftArrow: '&nbsp;',\n                rightArrow: '&nbsp;'\n            },\n            startDate: sDate,\n            toValue: function (date, format, language) {\n                var d = new Date(date);\n                d.setDate(d.getDate() + 7);\n                return new Date(d);\n            }\n        });\n\n        $('.date-range').datepicker().on(\"changeDate\", function (e) {\n            var timestamp = parseInt(e.timeStamp / 1000);\n\n            $.get(\"/local/date/\" + timestamp, function (data) {\n                $(\"#\" + $(this).attr(\"data-id\")).val(data.date);\n            });\n\n            toDate = $(\"#date-to\").val();\n            fromDate = $(\"#date-from\").val();\n\n            $(\".datetime-input\").val(fromDate + \" - \" + toDate);\n        });\n    };\n}\n\nfunction BookNow() {\n    this.init = function () {\n        $('.book-now').click(function () {\n            var href = $(this).attr(\"href\");\n            var timestamp = $(\".available-times\").attr(\"timestamp\");\n            window.location = href + \"/\" + timestamp;\n            return false;\n        });\n    };\n}\n\nfunction UIModal() {\n    this.init = function () {\n\n        $(\".notice-modal\").modal(\"show\");\n\n        $(\".btn-modal\").click(function () {\n            $(\"#\" + $(this).attr(\"modal-id\")).modal('show');\n            return false;\n        });\n\n        $(\".btn-close\").click(function () {\n            $(\"#\" + $(this).attr(\"modal-id\")).modal('hide');\n            return false;\n        });\n    };\n}\n\nfunction TogglePassword() {\n    this.init = function () {\n        $(\".password-eye\").click(function () {\n            $(this).toggleClass('active');\n            var passwordInput = $(this).siblings(\"input\");\n            if (passwordInput.attr(\"type\") === \"text\") {\n                passwordInput.attr(\"type\", \"password\");\n            }\n            else {\n                passwordInput.attr(\"type\", \"text\");\n            }\n        });\n    };\n}\n\nfunction AffixButton() {\n    this.init = function () {\n        // $(\"#book-experience-btn\").affix({\n        //     offset: {\n        //         top: 250  /* Set top offset equal to header outer height including margin */\n        //     }\n        // });\n        //\n        // var w = ($(\"body\").width() - $(\".container\").width()) / 2;\n        // $(\"#book-experience-btn\").css({right: w + \"px\"}).width($(\"#booking-btn-container\").width() - 30);\n    };\n}\n\n\nfunction Newsletter() {\n    this.init = function () {\n        var newsletterUrl = \"/local/newsletter\";\n        var newsletterGroup = $(\"#newsletter-group\");\n        var newsletterGroupLabel = $(\"#newsletter-group .control-label\");\n        var newsletterGroupAlert = $(\"#newsletter-group .newsletter-alert\");\n\n        $(\"#newsletter_email\").keypress(function (event) {\n\n            console.log(\"Submitting newsletter subscription...\");\n\n            if (event.which === 13) {\n                console.log(\"Pressed the enter button...\");\n                $.ajax({\n                    type: 'post',\n                    data: {email: $(this).val()},\n                    url: newsletterUrl,\n                    dataType: \"json\",\n                    success: function (response) {\n                        console.log(\"Success....\");\n                        newsletterGroup.removeClass(\"has-error\");\n                        newsletterGroupLabel.addClass(\"hide\");\n                        newsletterGroupAlert.removeClass(\"hide\");\n                        $(\"#newsletter_email\").addClass(\"hide\");\n                    },\n                    error: function (response) {\n                        var data = JSON.stringify(response);\n                        var json = $.parseJSON(data);\n                        console.log(response);\n                        console.log(json.responseJSON);\n                        newsletterGroup.addClass(\"has-error\");\n\n                        newsletterGroupLabel.html(json.responseJSON.email);\n                        newsletterGroupLabel.removeClass(\"hide\");\n                        newsletterGroupAlert.addClass(\"hide\");\n                    }\n                });\n\n                console.log(\"Done with submission...\");\n            }\n        });\n    };\n}\n\nfunction FileUpload() {\n    this.init = function () {\n        // Change this to the location of your server-side upload handler:\n        var url = '/local/upload/image';\n        var imageBin = \"\";\n        var imageType = \"\";\n\n        var removeBin = function () {\n            $(this).parent().remove();\n            $(window).resize();\n            (new Vertilize).init();\n        };\n\n        $('.fileupload').fileupload({\n            url: url,\n            dataType: 'json',\n            fail: function (e, data) {\n                console.log(\"fail and testing\", data);\n                console.log(\"error message\", e);\n            },\n            done: function (e, data) {\n\n                console.log(\"done and testing\");\n\n                $.each(data.result.files, function (index, file) {\n\n                    if (file.error == \"Image requires a minimum width\") {\n                        var imageSet = \"<div class=\\\"image-error\\\">\" +\n                            \"Image requires a minimum width\" +\n                            \"</div>\";\n                    }\n                    else {\n                        $('.profile-picture img').attr('src', \"/files/\" + file.name);\n                        var inputName = imageType === \"single\" ? \"image\" : \"images[]\";\n                        var imageSet = \"<div class=\\\"bin-item\\\">\" +\n                            \"<img src=\\\"/files/\" + file.name + \"\\\" />\" +\n                            \"<input type=\\\"hidden\\\" name=\\\"\" + inputName + \"\\\" value=\\\"/files/\" + file.name + \"\\\" />\" +\n                            \"<i class=\\\"fa fa-close bin-close\\\"></i>\" +\n                            \"</div>\";\n                    }\n                    if (imageType === \"single\") {\n                        imageBin.html(imageSet);\n                    } else {\n                        imageBin.append(imageSet);\n                    }\n                    $('.bin-close').show().click(removeBin);\n\n                    $(window).resize();\n                });\n                (new Vertilize).init();\n            },\n            progressall: function (e, data) {\n                var progress = parseInt(data.loaded / data.total * 100, 10);\n                $('#progress .progress-bar').css(\n                    'width',\n                    progress + '%'\n                );\n            }\n        }).prop('disabled', !$.support.fileInput)\n            .parent().addClass($.support.fileInput ? undefined : 'disabled');\n\n        $('.fileupload').click(function () {\n            imageBin = $(\"#\" + $(this).attr(\"bin\"));\n            imageType = $(this).attr(\"image-type\");\n        });\n\n        $('.bin-close').click(removeBin);\n    };\n}\n\n$(function () {\n    var $window = $(window);\n\n    (new StickyFooter($('#container'), $('#footer'))).update().bindOnResize();\n\n    (new ExternalLinkHandler).addTargetAttribute($('body'));\n\n    (new PageTimer).logToConsole();\n\n    (new UIBindings).bindTooltips();\n\n    (new UIBindings).bindPopovers();\n\n    (new UIBindings).bindSlickCarousels();\n\n    (new UIBindings).bindSharing();\n\n    (new UIBindings).bindMasonary();\n\n    (new UIBindings).bindMagnificpopup();\n\n    (new UIBindings).bindSubmittingButtons();\n\n    // (new Notifications).init();\n\n    (new Vertilize).init();\n\n    (new HeaderNav).init();\n\n    (new DatePicker).init();\n\n    (new BookNow).init();\n\n    (new UIModal).init();\n\n    (new FileUpload).init();\n\n    // (new setPricing).init();\n\n    (new setGuest).init();\n\n    (new HomeBanners).init();\n\n    (new SelectColor).init();\n\n    (new SetCurrency).init();\n\n    (new Newsletter).init();\n\n    (new TogglePassword).init();\n\n    (new AffixButton).init();\n\n    (new ScrollTop).init();\n\n    setHeightFor('.media-heading.same-height');\n    setHeightFor('.media-media-summary.same-height');\n\n    $window.on('resize', function () {\n        (new AffixButton).init();\n        (new Vertilize).init();\n    });\n\n    setTimeout(function () {\n        $('#notifications-wrapper').hide();\n    }, 200000);\n});\n","function ShareHandler($container) {\n  //var query = $.param(params);\n\n  var definedProps = {\n    url: $container.data('url'),\n    text: $container.data('text')\n  };\n\n  var buildHttpQuery = function (data) {\n    var copy = {};\n\n    $.each(data, function (k, v) {\n      if (v) {\n        copy[k] = v;\n      }\n    });\n\n    return $.param(copy);\n  };\n\n  var openPopup = function (shareWindow, conf) {\n    var top = Math.round((screen.height - conf.height)/2);\n    var left = Math.round((screen.width - conf.width)/2);\n\n    shareWindow.location.href = conf.url;\n    shareWindow.focus();\n    shareWindow.resizeTo(conf.width, conf.height);\n\n    shareWindow.moveTo(left, top);\n\n    //window.open(\n    //  conf.url,\n    //  \"share\" + conf.platform,\n    //  \"toolbar=0, status=0, width=\" + conf.width + \", height=\" + conf.height + \", top=\" + top + \", left=\" + left\n    //);\n\n  };\n\n  var popups = {\n    'google-plus': function (opt) {\n      return {\n        url: \"https://plus.google.com/share?\" + buildHttpQuery({\n          hl: opt.lang,\n          url: opt.url\n        })\n      };\n    },\n    facebook: function (opt) {\n      return {\n        url: \"http://www.facebook.com/sharer/sharer.php?\" + buildHttpQuery({\n          u: opt.url,\n          t: opt.text\n        }),\n        width: 900,\n        height: 500\n      };\n    },\n    twitter: function (opt) {\n      return {\n        url: \"https://twitter.com/intent/tweet?\" + buildHttpQuery({\n          text: opt.text,\n          url: opt.url,\n          via: opt.via\n        }),\n\n        width: 650,\n        height: 360\n      };\n    },\n    linkedin: function (opt) {\n      return {\n        url: 'https://www.linkedin.com/cws/share?url=' + buildHttpQuery({\n          url: opt.url,\n          isFramed: 'true'\n        }),\n        width: 550,\n        height: 550\n      };\n    },\n    pinterest: function (opt) {\n      return {\n        url: 'http://pinterest.com/pin/create/button/?url=' + buildHttpQuery({\n          url: opt.url,\n          description: opt.text,\n          media: opt.image\n        }),\n        width: 700,\n        height: 300\n      };\n    }\n  };\n\n\n  var self = this;\n\n  this.createButton = function (platform) {\n    var button = $('<a class=\"share-btn\"><i class=\"fa fa-' + platform + ' fa-lg\" ></i></a>');\n\n    button.css({cursor: 'pointer'});\n\n    button.on('click', function (e) {\n      e.preventDefault();\n      self.share(platform);\n    });\n\n    $container.append(button);\n\n    return button;\n  };\n\n  this.appendTwitter = function () {\n    $container.append(self.createButton('twitter'));\n  };\n\n\n  var sharePage = function (shareWindow, platform, url, $page) {\n    var shareProps = $.extend({}, definedProps);\n\n    shareProps.platform = platform;\n\n    if (!shareProps.text) {\n      shareProps.text = $page.find('meta').filter('[property=\"article-title\"]').attr('content');\n    }\n    if (!shareProps.via) {\n      shareProps.via = $page.find('#twitterHandle').attr('content');\n    }\n    if (!shareProps.lang) {\n      shareProps.lang = $page.find('html').attr('lang');\n    }\n    if (!shareProps.image) {\n      shareProps.image = $page.find('meta').filter('[property=\"og:image\"]').attr('content');\n    }\n\n    var text = shareProps.text;\n\n    if (platform == 'twitter') {\n      var startLen = 23 + 3; // twitter short URL length + 3\n      if (shareProps.via) {\n        startLen += (' via @' + shareProps.via).length;\n      }\n      if (text.length + startLen > 140) {\n        var diff = (text.length + startLen) - 140;\n        text = text.substr(0, text.length - diff) + '';\n      }\n    }\n\n    var popupConf = popups[platform]({\n      url: url,\n      text: text,\n      via: shareProps.via\n    });\n\n    openPopup(shareWindow, popupConf);\n  };\n\n  this.share = function (platform) {\n    var url = definedProps.url ? definedProps.url : window.location.href;\n\n    var shareWindow = window.open(\n      \"\",\n      \"share\" + platform,\n      \"toolbar=0, status=0, width=\" + 50 + \", height=\" + 50 + \", top=\" + 0 + \", left=\" + 0\n    );\n\n    if (window.location.href !== url) {\n      // show loader\n      var shareLoader = $('<div id=\"shareLoader\"></div>');\n      var fade = $('<div style=\"position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5);\"></div>');\n      var spinner = $('<i class=\"fa fa-cog fa-spin\" style=\"color: #fff\"></i>');\n      spinner.css({position: 'fixed', top: '50%', left: '50%' });\n      fade.append(spinner);\n      shareLoader.append(fade);\n\n      $('body').append(shareLoader);\n\n      $.ajax(url, {\n        async:    true,\n        success: function (data) {\n          shareLoader.remove();\n          sharePage(shareWindow, platform, url, $('<root/>').append(data));\n        },\n        error: function () {\n          shareLoader.remove();\n          alert('Failed to load URL: ' + url);\n        }\n      });\n    } else {\n      sharePage(shareWindow, platform, url, $(document));\n    }\n\n  };\n\n  this.appendFacebook = function () {\n    $container.append(self.createButton('facebook'));\n  };\n\n  this.appendGoogle = function () {\n    $container.append(self.createButton('google-plus'));\n  };\n\n  // TODO test\n  this.appendLinkedIn = function () {\n    $container.append(self.createButton('linkin'));\n  };\n\n  // TODO test / enable\n  this.appendPinterest = function () {\n    $container.append(self.createButton('pinterest'));\n  };\n}\n"]}