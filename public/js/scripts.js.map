{"version":3,"sources":["scripts.js","share.js"],"names":["PageTimer","self","this","getLoadTime","now","Date","getTime","window","performance","mozPerformance","msPerformance","webkitPerformance","timing","ms","navigationStart","Math","round","logToConsole","$","on","console","info","append","holder","text","StickyFooter","$wrap","$footer","$window","updateWrapperCSS","footerHeight","outerHeight","css","marginBottom","paddingBottom","bindOnResize","update","ExternalLinkHandler","hostname","document","location","matchInternalLink","RegExp","addTargetAttribute","context","find","filter","each","anchor","href","attr","isInternalLink","i","length","regex","match","addClass","UIBindings","bindTooltips","tooltip","bindPopovers","popover","bindSlickCarousels","slick","dots","slidesToShow","slidesToScroll","arrows","fade","autoplay","adaptiveHeight","autoplaySpeed","infinite","e","preventDefault","index","data","bindSharing","shareHandler","ShareHandler","appendFacebook","appendTwitter","bindMagnificpopup","magnificPopup","type","callbacks","markupParse","template","values","item","description","el","gallery","enabled","image","headerFit","captionFit","preserveHeaderAndCaptionWidth","markup","bindMasonary","load","masonry","itemSelector","columnWidth","gutter","bindSubmittingButtons","submitText","submittingText","btn","closest","removeClass","hide","prop","Notifications","wrapper","div","wrapperTop","offset","top","bindOnScroll","height","scrollTop","bindCloseButton","notification","fadeOut","init","Vertilize","options","byRow","property","target","remove","matchHeight","setHeightFor","selector","$columns","maxHeight","max","apply","map","get","isNumber","evt","event","charCode","which","keyCode","val","setPricing","setGuest","change","log","html","rate","persons","perPerson","replace","pricingTotal","parseFloat","pricingCommission","pricingLocalFee","toFixed","SelectColor","color","HomeBanners","currentUrl","width","indexSlider","first","carouselCaption","btnBlock","searchForm","resolvedCaption","setTimeout","HeaderNav","navContainer","children","url","undefined","parent","DatePicker","toDate","fromDate","onclick","id","daysActive","daysInActive","datepicker","daysOfWeekDisabled","daysOfWeekHighlighted","templates","leftArrow","rightArrow","monthYear","day","experienceId","date","experience_id","post","done","show","modal","BookNow","click","toValue","format","language","d","setDate","getDate","timestamp","parseInt","timeStamp","UIModal","FileUpload","imageBin","imageType","removeBin","fileupload","dataType","result","files","file","name","inputName","imageSet","progressall","progress","loaded","total","support","fileInput","$container","definedProps","buildHttpQuery","copy","k","v","param","openPopup","shareWindow","conf","screen","left","focus","resizeTo","moveTo","popups","google-plus","opt","hl","lang","facebook","u","t","twitter","via","linkedin","isFramed","pinterest","media","createButton","platform","button","cursor","share","sharePage","$page","shareProps","extend","startLen","diff","substr","popupConf","open","shareLoader","spinner","position","ajax","async","success","error","alert","appendGoogle","appendLinkedIn","appendPinterest","App"],"mappings":"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","file":"scripts.js","sourcesContent":["/*jslint browser: true, nomen: true */\n/*global $ */\n'use strict';\n\nfunction PageTimer() {\n    var self = this;\n    this.getLoadTime = function () {\n        var now = new Date().getTime();\n        // Get the performance object\n        window.performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance || {};\n        var timing = performance.timing || {};\n\n        var ms = now - timing.navigationStart;\n\n        return Math.round(ms / 10) / 100;\n    };\n\n    this.logToConsole = function () {\n        $(window).on('load', function () {\n            console && console.info && console.info(\"Client loaded in \" + self.getLoadTime() + 's');\n        });\n    };\n\n    this.append = function (holder) {\n        $(window).on('load', function () {\n            holder.text(' | LT: ' + self.getLoadTime() + 's');\n        });\n    }\n}\n\n\nfunction StickyFooter($wrap, $footer) {\n    var $window = $(window);\n    this.updateWrapperCSS = function () {\n        var footerHeight = $footer.outerHeight();\n\n        $wrap.css({\n            marginBottom: -1 * footerHeight,\n            paddingBottom: footerHeight\n        });\n    };\n\n    this.bindOnResize = function () {\n        $window.on('resize', this.updateWrapperCSS);\n\n        return this;\n    };\n\n    this.update = function () {\n        this.updateWrapperCSS();\n\n        return this;\n    };\n}\n\n\n/*\n Ensure all external links load as new window/tabs:\n */\n\nvar App;\n\nfunction ExternalLinkHandler() {\n    var self = this;\n    var hostname = document.location.hostname;\n\n    this.matchInternalLink = [new RegExp(\"^https?:\\/\\/(.*?)\" + hostname)];\n\n    this.addTargetAttribute = function (context) {\n        context.find('a').filter('[href^=\"http://\"], [href^=\"https://\"]').each(function () {\n            var anchor = $(this);\n            var href = anchor.attr('href');\n            var isInternalLink = false;\n\n            for (var i = 0; i < self.matchInternalLink.length; i++) {\n                var regex = self.matchInternalLink[i];\n                if (href.match(regex)) {\n                    isInternalLink = true;\n                }\n            }\n\n            if (!isInternalLink) {\n                anchor.attr('target', '_blank').addClass('external-link');\n            }\n        });\n    };\n\n}\n\nfunction UIBindings() {\n    this.bindTooltips = function () {\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    };\n    this.bindPopovers = function () {\n        $('[data-toggle=\"popover\"]').popover();\n    };\n\n    this.bindSlickCarousels = function () {\n        $('[data-slick-carousel-default]').slick({\n            dots: true,\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            arrows: true,\n            fade: true,\n            autoplay: true,\n            adaptiveHeight: true,\n            autoplaySpeed: 3000\n        });\n\n        $('[data-slick-carousel-three]').slick({\n            dots: true,\n            infinite: true,\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            adaptiveHeight: true,\n            autoplay: true,\n            autoplaySpeed: 3000\n        });\n\n        $('[data-toggle=\"slick-nav\"]').on('click', function (e) {\n            e.preventDefault();\n            var index = $(this).data('index');\n            $('[data-slick-carousel-default]').slick('slickGoTo', index);\n        });\n    };\n\n    this.bindSharing = function () {\n        $(\"[data-share-default]\").each(function () {\n            var shareHandler = new ShareHandler($(this));\n            shareHandler.appendFacebook();\n            shareHandler.appendTwitter();\n            //shareHandler.appendGoogle();\n            //shareHandler.appendLinkedIn();\n            //shareHandler.appendPinterest();\n        });\n    };\n\n    this.bindMagnificpopup = function () {\n        $('.gallery-image').magnificPopup({\n            type: 'image',\n            callbacks: {\n                markupParse: function (template, values, item) {\n                    values.description = item.el.data('description');\n                }\n            },\n            gallery: {\n                enabled: true\n            },\n            image: {\n                headerFit: true,\n                captionFit: true,\n                preserveHeaderAndCaptionWidth: false,\n                markup: '<div class=\"mfp-figure\">' +\n                '<figure>' +\n                '<header class=\"mfp-header\">' +\n                '<div class=\"mfp-top-bar\">' +\n                '<div class=\"mfp-title\"></div>' +\n                '<div class=\"mfp-close\"></div>' +\n                '<div class=\"mfp-decoration\"></div>' +\n                '</div>' +\n                '</header>' +\n                '<section class=\"mfp-content-container\">' +\n                '<div class=\"mfp-img\"></div>' +\n                '</section>' +\n                '<footer class=\"mfp-footer\">' +\n                '<figcaption class=\"mfp-figcaption\">' +\n                '<div class=\"mfp-bottom-bar-container\">' +\n                '<div class=\"mfp-bottom-bar\">' +\n                '<div class=\"mfp-counter\"></div>' +\n                '<div class=\"mfp-description\"></div>' +\n                '<div class=\"mfp-decoration\"></div>' +\n                '</div>' +\n                '</div>' +\n                '</figcaption>' +\n                '</footer>' +\n                '</figure>' +\n                '</div>',\n            }\n        });\n    };\n\n    this.bindMasonary = function () {\n        $('img').load(function () {\n            $(\".grid\").masonry();\n        });\n        $('.grid').masonry({\n            itemSelector: '.grid-item',\n            columnWidth: '.grid-sizer',\n            gutter: 5\n        });\n    };\n\n    this.bindSubmittingButtons = function () {\n        $(document).on('submit', function () {\n            var submitText = $(this).find('[data-submit-text]');\n            var submittingText = $(this).find('[data-submitting-text]');\n            var btn = submitText.closest('button');\n            submittingText.removeClass('hide');\n            submitText.hide();\n            btn.prop('disabled', true);\n        });\n    };\n\n\n}\n\nfunction Notifications() {\n    var wrapper = $('#notifications-wrapper');\n    var div = $('#notifications');\n    var wrapperTop = wrapper.offset().top;\n\n    this.bindOnScroll = function () {\n        wrapper.height(wrapper.height());\n        $(window).on('scroll', function () {\n            var scrollTop = $(window).scrollTop();\n            if (scrollTop > wrapperTop) {\n                div.addClass('fixed');\n            } else {\n                div.removeClass('fixed');\n            }\n        });\n    };\n\n    this.bindCloseButton = function () {\n        $(document).on('click', '[data-toggle=\"remove\"]', function (e) {\n            e.preventDefault();\n            var notification = $(this).closest('.notification');\n            notification.fadeOut(250, function () {\n                wrapper.height('auto');\n                wrapper.height(wrapper.height());\n\n            });\n        });\n    };\n\n    this.init = function () {\n        this.bindOnScroll();\n        this.bindCloseButton();\n    };\n}\n\nfunction Vertilize() {\n\n    this.init = function () {\n        var options = {\n            byRow: true,\n            property: 'height',\n            target: null,\n            remove: false\n        };\n\n        $('.same-height').matchHeight(options);\n\n        $('[data-mh=\"experience-media-summary\"]').matchHeight(options);\n\n\n    };\n}\n\nfunction setHeightFor(selector) {\n    var $columns = $(selector);\n    var maxHeight = Math.max.apply(Math, $columns.map(function () {\n        return $(this).height();\n    }).get());\n\n    $columns.height(maxHeight);\n}\n\nfunction isNumber(evt) {\n    evt = (evt) ? evt : window.event;\n    var charCode = (evt.which) ? evt.which : evt.keyCode;\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\n        return false;\n    }\n\n    if($(\"select#guests\").val().length > 0) {\n        (new setPricing).init();\n    }\n    return true;\n}\n\nfunction setGuest() {\n    this.init = function () {\n        $(\"select#guests\").change(function () {\n            console.log(\"setting new guests: \" + $(this).val());\n            $(\"#pricing_persons\").attr(\"data-pricing-persons\", $(this).val());\n            $(\"#pricing_persons\").html($(this).val() + \" person(s)\");\n\n            (new setPricing).init();\n        });\n    };\n}\n\nfunction setPricing() {\n    var rate = 0.2;\n    this.init = function () {\n\n        if($(\"#pricing_persons\").length > 0) {\n            console.log(\"setting new pricings\");\n            var persons = $(\"#pricing_persons\").attr(\"data-pricing-persons\");\n            var perPerson = $(\"#per_person\").val().replace(\"R\", \"\");\n            var pricingTotal = parseFloat(perPerson) * parseFloat(persons);\n            var pricingCommission = pricingTotal * rate;\n            var pricingLocalFee = pricingTotal - pricingCommission;\n\n            if (perPerson >= 10) {\n                $('#pricing_total').html(\"R\" + pricingTotal.toFixed(2));\n                $('#pricing_commission').html(\"R\" + pricingCommission.toFixed(2));\n                $('#pricing_local_fee').html(\"R\" + pricingLocalFee.toFixed(2));\n                $(\"#per_person\").val('R' + perPerson);\n\n                console.log(\"pricingTotal: \" + pricingTotal.toFixed(2));\n                console.log(\"pricingCommission: \" + pricingCommission.toFixed(2));\n                console.log(\"pricingLocalFee: \" + pricingLocalFee.toFixed(2));\n            }\n        }\n    };\n}\n\nfunction SelectColor() {\n    this.init = function () {\n\n        $(\"select\").each(function () {\n            if ($(this).val() != \"\") {\n                $(this).css({color: \"#3d3d3d\"});\n            }\n            else {\n                $(this).css({color: \"#aeaeae\"});\n            }\n        });\n\n        $(\"select\").change(function () {\n            if ($(this).val() != \"\") {\n                $(this).css({color: \"#3d3d3d\"});\n            }\n            else {\n                $(this).css({color: \"#aeaeae\"});\n            }\n        });\n    };\n}\n\n\nvar resolvedCaption = false;\nfunction HomeBanners() {\n\n    this.init = function () {\n        // get the current url from the body\n        var currentUrl = $(\"#current_url\").val();\n\n        console.log(\"current url: \" + currentUrl);\n        console.log(\"window width: \" + $(window).width());\n\n        if ($(window).width() >= 600 && (currentUrl == \"blog\" || currentUrl == \"\" || currentUrl == \"become-a-local\")) {\n            var indexSlider = $(\".carousel-inner\").first();\n            var carouselCaption = $(\".carousel-caption\");\n            var btnBlock = $(\".home-btn-block\");\n            var searchForm = 250;\n\n            if ($(window).width() >= 1340 && $(window).width() <= 1366) {\n\n                // console.log(\"Index slicer height: \" + indexSlider.height());\n                resolvedCaption = true;\n\n                $(\".search-form\").css({top: ((426 - searchForm) / 2) + \"px\"});\n                carouselCaption.css({top: (((426 - searchForm) / 2) - 24) + \"px\"});\n                btnBlock.css({top: (((426 - searchForm) / 2) + 200) + \"px\"});\n\n            } else {\n\n                if (indexSlider > 100) {\n                    resolvedCaption = true;\n                }\n\n                if (indexSlider - searchForm > 0) {\n\n                    // console.log(\"Index slicer height: \" + indexSlider.height());\n\n                    $(\".search-form\").css({top: ((indexSlider.height() - searchForm) / 2) + \"px\"});\n                    carouselCaption.css({top: (((indexSlider.height() - searchForm) / 2) - 24) + \"px\"});\n                    btnBlock.css({top: (((indexSlider.height() - searchForm) / 2) + 200) + \"px\"});\n                }\n\n            }\n\n            if (resolvedCaption == false) {\n                setTimeout(function () {\n                    (new HomeBanners).init();\n                }, 3000);\n            }\n        }\n    }\n}\n\nfunction HeaderNav() {\n    var navContainer = $('.top-yellow-bg .container');\n\n    this.init = function () {\n        $.get(\"/local/auth/nav\", function (data) {\n            navContainer.children(\".top-nav\").remove();\n            navContainer.append(data);\n        });\n\n        var url = $(\"#url\").val();\n        if (url === \"undefined\" || url === undefined) {\n            return false;\n        }\n\n        $(\".navbar-nav li a\").each(function () {\n            $(this).parent().removeClass(\"active\");\n            if ($(this).attr(\"href\") === url) {\n                $(this).parent().addClass(\"active\");\n            }\n        });\n    };\n}\n\nfunction DatePicker() {\n    this.init = function () {\n        var toDate = '';\n        var fromDate = '';\n\n        window.onclick = function (event) {\n            if (event.target.id !== \"duration\") {\n                $(\".datetime-group\").hide();\n            }\n        };\n\n        var daysActive = $(\"#datepicker\").attr(\"data-days-active\");\n        var daysInActive = $(\"#datepicker\").attr(\"data-days-inactive\");\n\n        console.log(\"some data is coming through now\");\n        console.log(daysInActive);\n\n        $('#datepicker').datepicker({\n            daysOfWeekDisabled: daysInActive,\n            daysOfWeekHighlighted: daysActive,\n            templates: {\n                leftArrow: '&nbsp;',\n                rightArrow: '&nbsp;'\n            }\n        });\n\n        $('#datepicker').datepicker().on(\"changeDate\", function (e) {\n            var monthYear = $(\".datepicker-switch\").html();\n            var day = $(\".table-condensed td.active\").html();\n            var experienceId = $(\"#experience-id\").val();\n            var date = day + \" \" + monthYear;\n\n            console.log(\"datepicker switch: \" + monthYear);\n            console.log(\"date: \" + day);\n\n            $(\".available-times\").attr(\"date\", date);\n\n            $(\".times-row\").hide();\n\n            var data = {\n                \"date\": date,\n                \"experience_id\": experienceId\n            };\n\n            $.post(\"/local/booking/times\", data)\n                .done(function (html) {\n                    console.log(\"times html::::\");\n                    console.log(html);\n\n                    $(\".times-row\").html(html).show();\n                });\n\n            $(\"#schedule-modal\").modal('show');\n\n            (new BookNow).init();\n        });\n\n        $(\".datetime-input\").click(function () {\n            $(\".datetime-group\").show();\n        });\n\n        $('.date-range').datepicker({\n            templates: {\n                leftArrow: '&nbsp;',\n                rightArrow: '&nbsp;'\n            },\n            toValue: function (date, format, language) {\n                var d = new Date(date);\n                d.setDate(d.getDate() + 7);\n                return new Date(d);\n            }\n        });\n\n        $('.date-range').datepicker().on(\"changeDate\", function (e) {\n            var timestamp = parseInt(e.timeStamp / 1000);\n\n            $.get(\"/local/date/\" + timestamp, function (data) {\n                $(\"#\" + $(this).attr(\"data-id\")).val(data.date);\n            });\n\n            toDate = $(\"#date-to\").val();\n            fromDate = $(\"#date-from\").val();\n\n            $(\".datetime-input\").val(fromDate + \" - \" + toDate);\n        });\n    };\n}\n\nfunction BookNow() {\n    this.init = function () {\n        $('.book-now').click(function () {\n            var href = $(this).attr(\"href\");\n            var timestamp = $(\".available-times\").attr(\"timestamp\");\n            window.location = href + \"/\" + timestamp;\n            return false;\n        });\n    };\n}\n\nfunction UIModal() {\n    this.init = function () {\n\n        $(\".notice-modal\").modal(\"show\");\n\n        $(\".btn-modal\").click(function () {\n            $(\"#\" + $(this).attr(\"modal-id\")).modal('show');\n            return false;\n        });\n\n        $(\".btn-close\").click(function () {\n            $(\"#\" + $(this).attr(\"modal-id\")).modal('hide');\n            return false;\n        });\n    };\n}\n\nfunction FileUpload() {\n    this.init = function () {\n        // Change this to the location of your server-side upload handler:\n        var url = '/local/upload/image';\n        var imageBin = \"\";\n        var imageType = \"\";\n\n        var removeBin = function () {\n            imageBin = $(this).parent().remove();\n            (new Vertilize).init();\n        };\n\n        $('.fileupload').fileupload({\n            url: url,\n            dataType: 'json',\n            done: function (e, data) {\n\n                $.each(data.result.files, function (index, file) {\n                    $('.profile-picture img').attr('src', \"/files/\" + file.name);\n\n                    var inputName = imageType === \"single\" ? \"image\" : \"images[]\";\n                    var imageSet = \"<div class=\\\"bin-item\\\">\" +\n                        \"<img src=\\\"/files/\" + file.name + \"\\\" />\" +\n                        \"<input type=\\\"hidden\\\" name=\\\"\" + inputName + \"\\\" value=\\\"/files/\" + file.name + \"\\\" />\" +\n                        \"<i class=\\\"fa fa-close bin-close\\\"></i>\" +\n                        \"</div>\";\n\n                    if (imageType === \"single\") {\n                        imageBin.html(imageSet);\n                    } else {\n                        imageBin.append(imageSet);\n                    }\n                    $('.bin-close').click(removeBin);\n                });\n                (new Vertilize).init();\n            },\n            progressall: function (e, data) {\n                var progress = parseInt(data.loaded / data.total * 100, 10);\n                $('#progress .progress-bar').css(\n                    'width',\n                    progress + '%'\n                );\n            }\n        }).prop('disabled', !$.support.fileInput)\n            .parent().addClass($.support.fileInput ? undefined : 'disabled');\n\n        $('.fileupload').click(function () {\n            imageBin = $(\"#\" + $(this).attr(\"bin\"));\n            imageType = $(this).attr(\"image-type\");\n        });\n\n        $('.bin-close').click(removeBin);\n    };\n}\n\n$(function () {\n    var $window = $(window);\n\n    (new StickyFooter($('#container'), $('#footer'))).update().bindOnResize();\n\n    (new ExternalLinkHandler).addTargetAttribute($('body'));\n\n    (new PageTimer).logToConsole();\n\n    (new UIBindings).bindTooltips();\n\n    (new UIBindings).bindPopovers();\n\n    (new UIBindings).bindSlickCarousels();\n\n    (new UIBindings).bindSharing();\n\n    (new UIBindings).bindMasonary();\n\n    (new UIBindings).bindMagnificpopup();\n\n    (new UIBindings).bindSubmittingButtons();\n\n    (new Notifications).init();\n\n    (new Vertilize).init();\n\n    (new HeaderNav).init();\n\n    (new DatePicker).init();\n\n    (new BookNow).init();\n\n    (new UIModal).init();\n\n    (new FileUpload).init();\n\n    (new setPricing).init();\n\n    (new setGuest).init();\n\n    // (new HomeBanners).init();\n\n    (new SelectColor).init();\n\n    setHeightFor('.media-heading.same-height');\n    setHeightFor('.media-media-summary.same-height');\n\n    $window.on('resize', function () {\n        (new Vertilize).init();\n\n        setHeightFor('.media-heading.same-height');\n        setHeightFor('.media-media-summary.same-height');\n    });\n\n    setTimeout(function () {\n        $('#notifications-wrapper').hide();\n    }, 200000);\n});\n","function ShareHandler($container) {\n  //var query = $.param(params);\n\n  var definedProps = {\n    url: $container.data('url'),\n    text: $container.data('text')\n  };\n\n  var buildHttpQuery = function (data) {\n    var copy = {};\n\n    $.each(data, function (k, v) {\n      if (v) {\n        copy[k] = v;\n      }\n    });\n\n    return $.param(copy);\n  };\n\n  var openPopup = function (shareWindow, conf) {\n    var top = Math.round((screen.height - conf.height)/2);\n    var left = Math.round((screen.width - conf.width)/2);\n\n    shareWindow.location.href = conf.url;\n    shareWindow.focus();\n    shareWindow.resizeTo(conf.width, conf.height);\n\n    shareWindow.moveTo(left, top);\n\n    //window.open(\n    //  conf.url,\n    //  \"share\" + conf.platform,\n    //  \"toolbar=0, status=0, width=\" + conf.width + \", height=\" + conf.height + \", top=\" + top + \", left=\" + left\n    //);\n\n  };\n\n  var popups = {\n    'google-plus': function (opt) {\n      return {\n        url: \"https://plus.google.com/share?\" + buildHttpQuery({\n          hl: opt.lang,\n          url: opt.url\n        })\n      };\n    },\n    facebook: function (opt) {\n      return {\n        url: \"http://www.facebook.com/sharer/sharer.php?\" + buildHttpQuery({\n          u: opt.url,\n          t: opt.text\n        }),\n        width: 900,\n        height: 500\n      };\n    },\n    twitter: function (opt) {\n      return {\n        url: \"https://twitter.com/intent/tweet?\" + buildHttpQuery({\n          text: opt.text,\n          url: opt.url,\n          via: opt.via\n        }),\n\n        width: 650,\n        height: 360\n      };\n    },\n    linkedin: function (opt) {\n      return {\n        url: 'https://www.linkedin.com/cws/share?url=' + buildHttpQuery({\n          url: opt.url,\n          isFramed: 'true'\n        }),\n        width: 550,\n        height: 550\n      };\n    },\n    pinterest: function (opt) {\n      return {\n        url: 'http://pinterest.com/pin/create/button/?url=' + buildHttpQuery({\n          url: opt.url,\n          description: opt.text,\n          media: opt.image\n        }),\n        width: 700,\n        height: 300\n      };\n    }\n  };\n\n\n  var self = this;\n\n  this.createButton = function (platform) {\n    var button = $('<a class=\"share-btn\"><i class=\"fa fa-' + platform + ' fa-lg\" ></i></a>');\n\n    button.css({cursor: 'pointer'});\n\n    button.on('click', function (e) {\n      e.preventDefault();\n      self.share(platform);\n    });\n\n    $container.append(button);\n\n    return button;\n  };\n\n  this.appendTwitter = function () {\n    $container.append(self.createButton('twitter'));\n  };\n\n\n  var sharePage = function (shareWindow, platform, url, $page) {\n    var shareProps = $.extend({}, definedProps);\n\n    shareProps.platform = platform;\n\n    if (!shareProps.text) {\n      shareProps.text = $page.find('meta').filter('[property=\"article-title\"]').attr('content');\n    }\n    if (!shareProps.via) {\n      shareProps.via = $page.find('#twitterHandle').attr('content');\n    }\n    if (!shareProps.lang) {\n      shareProps.lang = $page.find('html').attr('lang');\n    }\n    if (!shareProps.image) {\n      shareProps.image = $page.find('meta').filter('[property=\"og:image\"]').attr('content');\n    }\n\n    var text = shareProps.text;\n\n    if (platform == 'twitter') {\n      var startLen = 23 + 3; // twitter short URL length + 3\n      if (shareProps.via) {\n        startLen += (' via @' + shareProps.via).length;\n      }\n      if (text.length + startLen > 140) {\n        var diff = (text.length + startLen) - 140;\n        text = text.substr(0, text.length - diff) + '…';\n      }\n    }\n\n    var popupConf = popups[platform]({\n      url: url,\n      text: text,\n      via: shareProps.via\n    });\n\n    openPopup(shareWindow, popupConf);\n  };\n\n  this.share = function (platform) {\n    var url = definedProps.url ? definedProps.url : window.location.href;\n\n    var shareWindow = window.open(\n      \"\",\n      \"share\" + platform,\n      \"toolbar=0, status=0, width=\" + 50 + \", height=\" + 50 + \", top=\" + 0 + \", left=\" + 0\n    );\n\n    if (window.location.href !== url) {\n      // show loader\n      var shareLoader = $('<div id=\"shareLoader\"></div>');\n      var fade = $('<div style=\"position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5);\"></div>');\n      var spinner = $('<i class=\"fa fa-cog fa-spin\" style=\"color: #fff\"></i>');\n      spinner.css({position: 'fixed', top: '50%', left: '50%' });\n      fade.append(spinner);\n      shareLoader.append(fade);\n\n      $('body').append(shareLoader);\n\n      $.ajax(url, {\n        async:    true,\n        success: function (data) {\n          shareLoader.remove();\n          sharePage(shareWindow, platform, url, $('<root/>').append(data));\n        },\n        error: function () {\n          shareLoader.remove();\n          alert('Failed to load URL: ' + url);\n        }\n      });\n    } else {\n      sharePage(shareWindow, platform, url, $(document));\n    }\n\n  };\n\n  this.appendFacebook = function () {\n    $container.append(self.createButton('facebook'));\n  };\n\n  this.appendGoogle = function () {\n    $container.append(self.createButton('google-plus'));\n  };\n\n  // TODO test\n  this.appendLinkedIn = function () {\n    $container.append(self.createButton('linkin'));\n  };\n\n  // TODO test / enable\n  this.appendPinterest = function () {\n    $container.append(self.createButton('pinterest'));\n  };\n}\n"]}